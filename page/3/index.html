<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>BeeCaffe&#39;s Personal Blogs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="BeeCaffe&#39;s Personal Blogs">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="BeeCaffe&#39;s Personal Blogs">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="BeeCaffe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="BeeCaffe&#39;s Personal Blogs" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">BeeCaffe&#39;s Personal Blogs</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Pipe-In-Linux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/Pipe-In-Linux/" class="article-date">
  <time datetime="2020-05-15T14:26:33.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/Pipe-In-Linux/">Pipe In Linux</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;uinstd.h&gt;</span><br><span class="line">#include&lt;fcntl.h&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Category"><a href="#Category" class="headerlink" title="Category"></a>Category</h2><ul>
<li><a href="#conception">conception</a></li>
<li><a href="#pipe">pipe</a></li>
<li><a href="#pipe2">pipe2</a></li>
<li><a href="#code">code</a></li>
</ul>
<h2 id="conception"><a href="#conception" class="headerlink" title="conception"></a>conception</h2><hr>
<p>Pipe is one of the most basic IPC machanism in Linux system, whihc is able to tranfer data in parent and child process. We can easily creat and use pipe by Linux system call. The size of pipe is <strong>65KB</strong> in generally.</p>
<p><strong>The attributes of pipe includes:</strong></p>
<ol>
<li>The pipe is a file in logical. Actually, it is a Linux kernel buffer.</li>
<li>There are two file descriptor in a pipe, and they respectively represents write and read.</li>
<li>The data must enter pipe by write end, and leave pip by read end.<br>In a word, pipe is a circle queue mechanism which is used by linux kernel.</li>
</ol>
<p><strong>The limitaion of pipe:</strong></p>
<ol>
<li>Once the data is readed, the data are taken forever, and the pipe dosen’t reserve those data.</li>
<li>The pipe is a half word channel, which can only be read in one side.</li>
<li>The pipe can only be accessed by the processes which has the same father process or with father process.</li>
</ol>
<p><strong>The process of parent thread and child thread IPC</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/13348038-361488176f58b439.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ol>
<li>The father process calls pipe function to cerate an pipe, which obtains fd[0] and fd[1].</li>
<li>The father process fork() an child process, both father and child process have fd[0] and fd[0].</li>
<li>The father process colses the read end and child process colse the write end. Then, the father process sends message to the pipe and the child process gets the data from pipe.</li>
</ol>
<p><strong>Four special situations about pipes</strong><br><img src="https://upload-images.jianshu.io/upload_images/13348038-9789f7955152bb49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ol>
<li>If write side has no writers (write side file descriptor = 0), after data read over, the read file descriptor will return zero.</li>
<li><p>If write side has writers (write size file descriptor  &gt; 0), after pipe is empty, the reader will wait for the writer to write.<br><img src="https://upload-images.jianshu.io/upload_images/13348038-d58d65ba47340439.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
</li>
<li><p>If read side has no readers (read side file descriptor = 0), when writer try to write datas to the pipe, the process will receive SIGPIPE.</p>
</li>
<li>If read side has readers (read side file descriptor &gt; 0), when pipe is full, the writer will block and wait.</li>
</ol>
<h2 id="pipe"><a href="#pipe" class="headerlink" title="pipe"></a>pipe</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;create a pipe</span><br><span class="line">int pipe(int pipefd[2]);</span><br><span class="line"></span><br><span class="line">args</span><br><span class="line">    - pipefd: two file descriptor</span><br><span class="line">return</span><br><span class="line">    - success: 0</span><br><span class="line">    - error: -1</span><br><span class="line">    </span><br><span class="line">Notes:</span><br><span class="line">    - pipefd[0]: read</span><br><span class="line">    - pipefd[1]: write</span><br></pre></td></tr></table></figure>
<h2 id="pipe2"><a href="#pipe2" class="headerlink" title="pipe2"></a>pipe2</h2><hr>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//If flags is 0, then pipe2() is the same as pipe().</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pipe2</span><span class="params">(<span class="keyword">int</span> pipefd[<span class="number">2</span>], <span class="keyword">int</span> flags)</span></span>;</span><br><span class="line">args:</span><br><span class="line">    - pipefd: The file descriptor of pipe.</span><br><span class="line">    - flags:</span><br><span class="line">        - O_CLOEXEC:</span><br><span class="line">        - O_DIRECT</span><br><span class="line">        - O_NONBLOCK</span><br><span class="line"><span class="keyword">return</span>:</span><br><span class="line">    - successed: <span class="number">0</span></span><br><span class="line">    - error: <span class="number">-1</span></span><br></pre></td></tr></table></figure>
<h2 id="code"><a href="#code" class="headerlink" title="code"></a>code</h2><p>An example of pipe, we fork a child process in the main process, the main process write data to the pipe and the child process read the data and print it to the console.<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">int</span> fd[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">if</span>(pipe(fd)==<span class="number">-1</span>)&#123;</span><br><span class="line">        assert(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    pid=fork();</span><br><span class="line">    <span class="keyword">char</span> buff[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">char</span>* p=<span class="string">"test of pipe\n"</span>;</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">if</span>(pid==<span class="number">-1</span>)&#123;</span><br><span class="line">        assert(<span class="literal">false</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(pid==<span class="number">0</span>)&#123;<span class="comment">//child process</span></span><br><span class="line">        close(fd[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">if</span>((len=read(fd[<span class="number">0</span>],buff,<span class="keyword">sizeof</span>(buff)))==<span class="number">-1</span>)&#123;</span><br><span class="line">            assert(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(write(STDOUT_FILENO,buff,len)==<span class="number">-1</span>)&#123;</span><br><span class="line">            assert(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        close(fd[<span class="number">0</span>]);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;<span class="comment">//main process</span></span><br><span class="line">        close(fd[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">if</span>(write(fd[<span class="number">1</span>],p,<span class="built_in">strlen</span>(p))==<span class="number">-1</span>)&#123;</span><br><span class="line">            assert(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        wait(<span class="literal">NULL</span>);</span><br><span class="line">        close(fd[<span class="number">1</span>]);</span><br><span class="line">         <span class="keyword">char</span>* s=<span class="string">"main end!\n"</span>;</span><br><span class="line">         write(STDOUT_FILENO,s,<span class="built_in">strlen</span>(s));</span><br><span class="line">    &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/Pipe-In-Linux/" data-id="cka8b3ciu0009okv6eatubqob" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Semaphore-In-Linux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/Semaphore-In-Linux/" class="article-date">
  <time datetime="2020-05-15T14:25:51.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/Semaphore-In-Linux/">Semaphore In Linux</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="header"><a href="#header" class="headerlink" title="header"></a>header</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;semaphore.h&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Category"><a href="#Category" class="headerlink" title="Category"></a>Category</h2><hr>
<p><a href="#sem_t">sem_t</a></p>
<p><a href="#sem_init">sem_init</a></p>
<p><a href="#sem_open">sem_open</a></p>
<p><a href="#sem_destroy">sem_destroy</a></p>
<p><a href="#sem_wait">sem_wait</a></p>
<p><a href="#sem_post">sem_post</a></p>
<p><a href="#code">code</a></p>
<h2 id="sem-t"><a href="#sem-t" class="headerlink" title="sem_t"></a>sem_t</h2><hr>
<p>In C language, the sem_t is the semphore structor, which is a long int in basic.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typedef long long sem_t;</span><br></pre></td></tr></table></figure></p>
<h2 id="sem-init"><a href="#sem-init" class="headerlink" title="sem_init"></a>sem_init</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int sem_init(sem_t *sem, int pshared, unsigned int value);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>brief:</strong>  initializes the unnamed semaphore at the address pointed to by sem.  The value argument specifies the initial value for the semaphore.</li>
<li><p><strong>arguments:</strong></p>
<ul>
<li><strong>-sem:</strong> The semaphore flag.</li>
<li><p><strong>-pshared:</strong> indicates whether this semaphore is to be shared between the threads of a process, or between processes.<br>If pshared has the value 0, then the semaphore is shared between the threads of a process, and should be located at some address that is visible to<br> all threads (e.g., a global variable, or a variable allocated dynamically on the heap).</p>
<p> If pshared is nonzero, then the semaphore is shared between processes, and should be located  in  a  region  of  shared  memory  (see  shm_open(3),<br> mmap(2),  and shmget(2)).  (Since a child created by fork(2) inherits its parent’s memory mappings, it can also access the semaphore.)  Any process<br> that can access the shared memory region can operate on the semaphore using sem_post(3), sem_wait(3), and so on.</p>
<p> Initializing a semaphore that has already been initialized results in undefined behavior.</p>
</li>
<li><strong>-value:</strong> </li>
</ul>
</li>
<li><strong>return value:</strong><br>sem_init() returns 0 on success; on error, -1 is returned, and errno is set to indicate the error.</li>
<li><strong>code:</strong><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//initializes unamed semaphore</span></span><br><span class="line"><span class="keyword">sem_t</span> *mutex;</span><br><span class="line">sem_init(mutex,<span class="number">0</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="sem-open"><a href="#sem-open" class="headerlink" title="sem_open"></a>sem_open</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sem_t *sem_open(const char *name, int oflag);</span><br><span class="line">sem_t *sem_open(const char *name, int oflag,mode_t mode, unsigned int value);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>brief:</strong>  initialize and open a named semaphore</li>
<li><p><strong>arguments:</strong> </p>
<ul>
<li><strong>-name:</strong> name of semphore.</li>
<li><p><strong>-flag:</strong> specifies flags that control the operation of the call. (Definitions  of  the  flags  values  can  be  obtained  by  including<br> &lt;fcntl.h&gt;.)  If O_CREAT is specified in oflag, then the semaphore is created if it does not already exist.  The owner (user ID) of the semaphore is<br> set to the effective user ID of the calling process.  The group ownership (group ID) is set to the effective group ID of the calling  process.   If<br> both O_CREAT and O_EXCL are specified in oflag, then an error is returned if a semaphore with the given name already exists.</p>
<p> If  O_CREAT is specified in oflag, then two additional arguments must be supplied.  The mode argument specifies the permissions to be placed on the<br> new semaphore, as for open(2).  (Symbolic definitions for the permissions bits can be obtained by including &lt;sys/stat.h&gt;.)   The  permissions  set‐<br> tings are masked against the process umask.  Both read and write permission should be granted to each class of user that will access the semaphore.<br> The value argument specifies the initial value for the new semaphore.  If O_CREAT is specified, and a semaphore with the given name already exists,<br> then mode and value are ignored.</p>
</li>
</ul>
</li>
<li><strong>return value:</strong>  On  success,  sem_open()  returns the address of the new semaphore; this address is used when calling other semaphore-related functions.  On error,<pre><code>sem_open() returns SEM_FAILED, with errno set to indicate the error.
</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//initializes a named semaphore</span></span><br><span class="line"><span class="keyword">sem_t</span> mutex;</span><br><span class="line">mutex=sem_open(<span class="string">"name_mutex"</span>,O_CREATE,<span class="number">0644</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="sem-desroy"><a href="#sem-desroy" class="headerlink" title="sem_desroy"></a>sem_desroy</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> int sem_destroy(sem_t *sem);</span><br><span class="line">&#96;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>brief:</strong> destroy an unnamed semaphore, sem_destroy() destroys the unnamed semaphore at the address pointed to by sem. Only a semaphore that has been initialized by sem_init(3) should be destroyed using sem_destroy().Destroying a semaphore that other processes or threads are currently blocked on (in sem_wait(3)) produces undefined behavior.Using a semaphore that has been destroyed produces undefined results, until the semaphore has been reinitialized using sem_init(3).</li>
<li><strong>arguments:</strong> <ul>
<li><strong>-sem:</strong> the semaphore ID.</li>
</ul>
</li>
<li><strong>return value:</strong> sem_destroy() returns 0 on success; on error, -1 is returned, and errno is set to indicate the error.</li>
<li><strong>code</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;initializes a semaphore and destory it.</span><br><span class="line">sem_t* mutex;</span><br><span class="line">sem_init(mutex,0,1);</span><br><span class="line">sem_desotroy(mutex);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="sem-wait-sem-trywait-sem-timewait"><a href="#sem-wait-sem-trywait-sem-timewait" class="headerlink" title="sem_wait, sem_trywait, sem_timewait"></a>sem_wait, sem_trywait, sem_timewait</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;blocking lock a semaphore</span><br><span class="line">int sem_wait(sem_t *sem);</span><br><span class="line">args: </span><br><span class="line">    -sem: the semaphore ID.</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;unblocking lock a semaphore</span><br><span class="line">int sem_trywait(sem_t *sem);</span><br><span class="line">args:</span><br><span class="line">    -sem: the semaphore ID</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">int sem_timedwait(sem_t *sem, const struct timespec *abs_timeout);</span><br><span class="line">args:</span><br><span class="line">    -sem: the semaphore ID</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>brief:</strong> </p>
<ul>
<li><p><strong>sem_wait()</strong> decrements (locks) the semaphore pointed to by sem.  If the semaphore’s value is greater than zero, then the decrement proceeds, and thefunction returns, immediately.  If the semaphore currently has the value zero, then the call blocks until either it becomes possible to perform the decrement (i.e., the semaphore value rises above zero), or a signal handler interrupts the call.</p>
</li>
<li><p><strong>sem_trywait()</strong>  is  the  same  as sem_wait(), except that if the decrement cannot be immediately performed, then call returns an error (errno set to EAGAIN) instead of blocking.</p>
</li>
<li><p><strong>sem_timedwait()</strong> is the same as sem_wait(), except that abs_timeout specifies a limit on the amount of time that the call should block if the decre‐ment cannot be immediately performed.  If the operation can be performed immediately, then sem_timedwait() never fails with a timeout error, regardless of the value of abs_timeout.  Fur‐thermore, the validity of abs_timeout is not checked in this case.</p>
</li>
</ul>
</li>
<li><p><strong>return value:</strong>   All of these functions return 0 on success; on error, the value of the semaphore is left unchanged, -1 is returned, and errno is  set  to  indicate the error.</p>
</li>
<li><strong>code:</strong><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//place holder</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="sem-post"><a href="#sem-post" class="headerlink" title="sem_post"></a>sem_post</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;increments (unlock) a semaphore</span><br><span class="line">int sem_post(sem_t *sem);</span><br><span class="line">args:</span><br><span class="line">    -sem: the semaphore ID</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>brief:</strong>  sem_post()  increments  (unlocks)  the  semaphore pointed to by sem.  If the semaphore’s value consequently becomes greater than zero, then another process or thread blocked in a sem_wait(3) call will be woken up and proceed to lock the semaphore.</p>
</li>
<li><p><strong>return value:</strong>  sem_post() returns 0 on success; on error, the value of the semaphore is left unchanged, -1 is returned, and errno is set to indicate the error.</p>
</li>
</ul>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p>There is my own simple semaphore class , which based on semaphore in linux. There are three files in total: semaphore.h, semaphore.cc and semaphore_test<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//semaphore.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __BEE_MUTEX_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __BEE_MUTEX_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;semaphore.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"macro.h"</span></span></span><br><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment"> *Class Semaphore</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"><span class="keyword">namespace</span> bee&#123;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Semaphore</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Semaphore(<span class="keyword">int</span> count=<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">   ~Semaphore();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">wait</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">trywait</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">notify</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//The semaphore</span></span><br><span class="line">    <span class="keyword">sem_t</span> m_semaphore;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//semaphore.cc</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"mutex.h"</span></span></span><br><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment"> *Class Semaphore</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"><span class="keyword">namespace</span> bee&#123;</span><br><span class="line">Semaphore::Semaphore(<span class="keyword">int</span> count)&#123;</span><br><span class="line">    <span class="keyword">if</span>(sem_init(&amp;m_semaphore,<span class="number">0</span>,count)==<span class="number">-1</span>)&#123;</span><br><span class="line">        ASSERT_DESC(<span class="literal">false</span>,<span class="string">"sem_init error!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Semaphore::~Semaphore()&#123;</span><br><span class="line">    <span class="keyword">if</span>(sem_destroy(&amp;m_semaphore)==<span class="number">-1</span>)&#123;</span><br><span class="line">        ASSERT_DESC(<span class="literal">false</span>,<span class="string">"sem_destroy error!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Semaphore::wait</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sem_wait(&amp;m_semaphore)==<span class="number">-1</span>)&#123;</span><br><span class="line">        ASSERT_DESC(<span class="literal">false</span>,<span class="string">"sem_wait error!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Semaphore::trywait</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sem_trywait(&amp;m_semaphore)==<span class="number">-1</span>)&#123;</span><br><span class="line">        ASSERT_DESC(<span class="literal">false</span>,<span class="string">"sem_trywait error!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Semaphore::notify</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sem_post(&amp;m_semaphore))&#123;</span><br><span class="line">        ASSERT_DESC(<span class="literal">false</span>,<span class="string">"sem_post error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>And There is a test program of my Semaphore class, where we use semaphore to make  main thread thread 1 run a function func(). We set a global semaphore instance sem, and initializes it’s semaphore as 1. When main function or thread 1 are going to run, they must get a semaphore. Therefore, the program would be alternately executed in turn.<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//semaphore test</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"../net/mutex.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> bee;</span><br><span class="line"><span class="function"><span class="keyword">static</span> bee::Semaphore <span class="title">sem</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">func</span><span class="params">(<span class="keyword">void</span>*)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;++i)&#123;</span><br><span class="line">        sem.wait();</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"func is running ..."</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        sem.notify();</span><br><span class="line">        sleep(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">pthread_t</span> tid;</span><br><span class="line">    <span class="keyword">if</span>(pthread_create(&amp;tid,<span class="literal">nullptr</span>,func,<span class="literal">nullptr</span>)==<span class="number">-1</span>)&#123;</span><br><span class="line">        assert(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;++i)&#123;</span><br><span class="line">        sem.wait();</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"main is running ..."</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        sem.notify();</span><br><span class="line">        sleep(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(pthread_join(tid,<span class="literal">nullptr</span>)==<span class="number">-1</span>)&#123;</span><br><span class="line">        assert(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>result:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">main is running ...</span><br><span class="line">func is running ...</span><br><span class="line">main is running ...</span><br><span class="line">func is running ...</span><br><span class="line">main is running ...</span><br><span class="line">func is running ...</span><br><span class="line">main is running ...</span><br><span class="line">func is running ...</span><br><span class="line">main is running ...</span><br><span class="line">func is running ...</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/Semaphore-In-Linux/" data-id="cka8b3ciy000jokv6h0wg3s07" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Basic-IO-In-Linux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/Basic-IO-In-Linux/" class="article-date">
  <time datetime="2020-05-15T14:24:34.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/Basic-IO-In-Linux/">Basic IO In Linux</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="File-IO"><a href="#File-IO" class="headerlink" title="File IO"></a>File IO</h1><h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><hr>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fcnt.h&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="Category"><a href="#Category" class="headerlink" title="Category"></a>Category</h2><hr>
<p><a href="#open">open</a></p>
<p><a href="#creat">creat</a></p>
<p><a href="#close">close</a></p>
<p><a href="#lseek">lseek</a></p>
<p><a href="#read">read</a></p>
<p><a href="#write">write</a></p>
<p><a href="#code">code</a></p>
<h2 id="open"><a href="#open" class="headerlink" title="open"></a>open</h2><hr>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Opens a file and return it's file descriptor</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">open</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* pathname,<span class="keyword">int</span> oflag,...)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">args:</span></span><br><span class="line">    - pathname: file path name</span><br><span class="line">    - oflag:</span><br><span class="line">        - O_RDONLY: read only</span><br><span class="line">        - O_WRONLY: write only</span><br><span class="line">        - RDWR: write <span class="keyword">and</span> read</span><br><span class="line">        - O_APPEND: appends to file end</span><br><span class="line">        - O_CREAT: <span class="keyword">if</span> file <span class="keyword">not</span> exist, creates a <span class="keyword">new</span> one</span><br><span class="line">        - O_EXCL: Test wether a file exist <span class="keyword">or</span> <span class="keyword">not</span>, <span class="keyword">if</span> <span class="keyword">not</span> atomaicly creates a file</span><br><span class="line">        - O_TRUNC: I dont know</span><br><span class="line">        - O_NOCTTY: I dont know</span><br><span class="line">        - O_NONBLOCK: If ptahname is a FIFO <span class="keyword">or</span> a block, <span class="built_in">set</span> the file to a nonblocking status.</span><br><span class="line"><span class="keyword">return</span>:</span><br><span class="line">    successed: The file descriptor</span><br><span class="line">    error: <span class="number">-1</span> <span class="keyword">and</span> errno sets to appropriately</span><br></pre></td></tr></table></figure>
<h2 id="creat"><a href="#creat" class="headerlink" title="creat"></a>creat</h2><hr>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//creats a file</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">creat</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* pathname,<span class="keyword">mode_t</span> mode)</span></span>;</span><br><span class="line"></span><br><span class="line">args:</span><br><span class="line">    - pathname: The file pathname</span><br><span class="line">    - mode:</span><br><span class="line">        - O_RDONLY: read only</span><br><span class="line">        - O_WRONLY: write only</span><br><span class="line">        - RDWR: write <span class="keyword">and</span> read</span><br><span class="line">        - O_APPEND: appends to file end</span><br><span class="line">        - O_CREATE: <span class="keyword">if</span> file <span class="keyword">not</span> exist, creates a <span class="keyword">new</span> one</span><br><span class="line">        - O_EXCL: Test wether a file exist <span class="keyword">or</span> <span class="keyword">not</span>, <span class="keyword">if</span> <span class="keyword">not</span> atomaicly creates a file</span><br><span class="line">        - O_TRUNC: I dont know</span><br><span class="line">        - O_NOCTTY: I dont know</span><br><span class="line">        - O_NONBLOCK: If ptahname is a FIFO <span class="keyword">or</span> a block, <span class="built_in">set</span> the file to a nonblocking status.</span><br><span class="line"><span class="keyword">return</span>:</span><br><span class="line">    successed: The file descriptor</span><br><span class="line">    error: <span class="number">-1</span> <span class="keyword">and</span> errno sets to appropriately.</span><br></pre></td></tr></table></figure>
<h2 id="close"><a href="#close" class="headerlink" title="close"></a>close</h2><hr>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//close a file</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">close</span><span class="params">(<span class="keyword">int</span> fildes)</span></span>;</span><br><span class="line"></span><br><span class="line">args:</span><br><span class="line">    - fildes: The file descriptor</span><br><span class="line"><span class="keyword">return</span>:</span><br><span class="line">    - successed: <span class="number">0</span></span><br><span class="line">    - error: <span class="number">-1</span> <span class="keyword">and</span> errno sets to appropriately.</span><br></pre></td></tr></table></figure>
<h2 id="lseek"><a href="#lseek" class="headerlink" title="lseek"></a>lseek</h2><hr>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">off_t</span> <span class="title">lseek</span><span class="params">(<span class="keyword">int</span> fildes,<span class="keyword">off_t</span> offset,<span class="keyword">int</span> whence)</span></span>;</span><br><span class="line"></span><br><span class="line">args:</span><br><span class="line">    - fildes: The file descriptor.</span><br><span class="line">    - offset: The offset.</span><br><span class="line">    - whence:</span><br><span class="line">        -SEEK_SET: The distance between file begin <span class="keyword">and</span> offset.</span><br><span class="line">        -SEEK_END: Set the offset to file end add offset.</span><br><span class="line">        -SEEK_CUR: Set the offset to current value add offset.</span><br><span class="line"><span class="keyword">return</span>:</span><br><span class="line">    successed: The <span class="keyword">new</span> location of file.</span><br><span class="line">    error: <span class="number">-1</span> <span class="keyword">and</span> errno sets to appropriately.</span><br></pre></td></tr></table></figure>
<h2 id="read"><a href="#read" class="headerlink" title="read"></a>read</h2><hr>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">ssize_t</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> fildes, <span class="keyword">void</span>* buff, <span class="keyword">size_t</span> nbytes)</span></span>;</span><br><span class="line"></span><br><span class="line">args:</span><br><span class="line">    - fildes: The file descriptor</span><br><span class="line">    - buff: The buffer to store data</span><br><span class="line">    - nbytes: Read how many bytes.</span><br><span class="line"><span class="keyword">return</span>:</span><br><span class="line">    successed:</span><br><span class="line">        - meets EOF: <span class="number">0</span></span><br><span class="line">        - The bytes of read.</span><br><span class="line">    error: <span class="number">-1</span> <span class="keyword">and</span> errno sets to appropriately.</span><br></pre></td></tr></table></figure>
<h2 id="write"><a href="#write" class="headerlink" title="write"></a>write</h2><hr>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">ssize_t</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> fildes,<span class="keyword">const</span> <span class="keyword">void</span> *buff, <span class="keyword">size_t</span> nbytes)</span></span>;</span><br><span class="line"></span><br><span class="line">args:</span><br><span class="line">    - fildes: The file descriptor</span><br><span class="line">    - buff: The write buffer</span><br><span class="line">    - nbytes: How many bytes to write</span><br><span class="line"><span class="keyword">return</span>:</span><br><span class="line">    successed: The bytes of write</span><br><span class="line">    error: <span class="number">-1</span> <span class="keyword">and</span> errno sets appropriately</span><br></pre></td></tr></table></figure>
<h2 id="code"><a href="#code" class="headerlink" title="code"></a>code</h2><hr>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//package your own io functions</span></span><br><span class="line"><span class="comment">//io.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __BEE_IO_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __BEE_IO_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"utils.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"macro.h"</span></span></span><br><span class="line"><span class="keyword">namespace</span> bee&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *@brief: opens a file, if not exist creats it.</span></span><br><span class="line"><span class="comment"> *@param[in] pathname: the file pathname</span></span><br><span class="line"><span class="comment"> *@param[in] ofalgs: The file open mode, default by creat and write and read.</span></span><br><span class="line"><span class="comment"> *@reurn: The file descriptor.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Open</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; pathname,<span class="keyword">int</span> oflags=<span class="number">0</span>,<span class="keyword">mode_t</span> mode=<span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *@brief: creats a file.</span></span><br><span class="line"><span class="comment"> *@param[in] pathname: the file pathname</span></span><br><span class="line"><span class="comment"> *@param[in] ofalgs: The file open mode, default by creat and write and read.</span></span><br><span class="line"><span class="comment"> *@return: The file descriptor.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Creat</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; pathname, <span class="keyword">mode_t</span> mode=O_CREAT|O_RDWR)</span></span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *@brief: close a file.</span></span><br><span class="line"><span class="comment"> *@param[in] fd: the file descriptor</span></span><br><span class="line"><span class="comment"> *@return: NULL.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Close</span><span class="params">(<span class="keyword">int</span> fd)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Lseek</span><span class="params">(<span class="keyword">int</span> fd,<span class="keyword">off_t</span> offset,<span class="keyword">int</span> whence=SEEK_SET)</span></span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *@brief: read a file.</span></span><br><span class="line"><span class="comment"> *@param[in] fd: the file descriptor</span></span><br><span class="line"><span class="comment"> *@return: The file contains string..</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="title">Read</span><span class="params">(<span class="keyword">int</span> fd)</span></span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *@brief: write a file.</span></span><br><span class="line"><span class="comment"> *@param[in] fd: the file descriptor</span></span><br><span class="line"><span class="comment"> *@param[in] buffer: The string to write</span></span><br><span class="line"><span class="comment"> *@return: NULL.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Write</span><span class="params">(<span class="keyword">int</span> fd,<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; buffer)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//packages your own io functions</span></span><br><span class="line"><span class="comment">//io.cc</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"io.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> bee&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFF_SIZE 8192</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Open</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; pathname,<span class="keyword">int</span> oflags,<span class="keyword">mode_t</span> mode)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> fd;</span><br><span class="line">    <span class="keyword">if</span>(access(pathname.c_str(),F_OK)!=<span class="number">0</span>)&#123;</span><br><span class="line">        fd=open(pathname.c_str(),O_CREAT|O_RDWR|O_TRUNC,<span class="number">0777</span>);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span>&lt;&lt;<span class="string">"creats a new file in: "</span>&lt;&lt;pathname&lt;&lt;<span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(oflags==<span class="number">0</span> &amp;&amp; mode==<span class="number">0</span>)&#123;</span><br><span class="line">        fd=open(pathname.c_str(),O_RDWR|O_APPEND);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        fd=open(pathname.c_str(),oflags,mode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(fd==<span class="number">-1</span>)&#123;</span><br><span class="line">        ASSERT_DESC(<span class="literal">false</span>,<span class="string">"open file error!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fd;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Creat</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; pathname, <span class="keyword">mode_t</span> mode)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> fd=creat(pathname.c_str(),mode);</span><br><span class="line">    <span class="keyword">if</span>(fd==<span class="number">-1</span>)&#123;</span><br><span class="line">        ASSERT_DESC(<span class="literal">false</span>,<span class="string">"creat file error!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fd;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Close</span><span class="params">(<span class="keyword">int</span> fd)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(close(fd)==<span class="number">-1</span>)&#123;</span><br><span class="line">        ASSERT_DESC(<span class="literal">false</span>,<span class="string">"close file error!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Lseek</span><span class="params">(<span class="keyword">int</span> fd,<span class="keyword">off_t</span> offset,<span class="keyword">int</span> whence)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="title">Read</span><span class="params">(<span class="keyword">int</span> fd)</span></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> str=<span class="string">""</span>;</span><br><span class="line">   <span class="keyword">int</span> n=<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">char</span> buf[BUFF_SIZE];</span><br><span class="line">   lseek(fd,<span class="number">0</span>,SEEK_SET);</span><br><span class="line">   <span class="keyword">while</span>(n)&#123;</span><br><span class="line">        n=read(fd,buf,BUFF_SIZE);</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">-1</span>)&#123;</span><br><span class="line">            ASSERT_DESC(<span class="literal">false</span>,<span class="string">"read file error!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="title">tmp</span><span class="params">(buf)</span></span>;</span><br><span class="line">        str.append(tmp);</span><br><span class="line">        bzero(buf,BUFF_SIZE);</span><br><span class="line">   &#125;</span><br><span class="line">   lseek(fd,<span class="number">0</span>,SEEK_END);</span><br><span class="line">   <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Write</span><span class="params">(<span class="keyword">int</span> fd,<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; buffer)</span></span>&#123;</span><br><span class="line">    <span class="comment">//char buf[]="";</span></span><br><span class="line">    <span class="keyword">int</span> len=buffer.size();</span><br><span class="line">    <span class="comment">//strncpy(buf,buffer.c_str(),len+1);</span></span><br><span class="line">    <span class="keyword">if</span>(write(fd,buffer.c_str(),len)!=len)&#123;</span><br><span class="line">        ASSERT_DESC(<span class="literal">false</span>,<span class="string">"write file error!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/Basic-IO-In-Linux/" data-id="cka8b3cie0000okv6cml82a2f" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-DFS-Of-Graph" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/DFS-Of-Graph/" class="article-date">
  <time datetime="2020-05-15T14:22:42.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/DFS-Of-Graph/">DFS Of Graph</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Conception"><a href="#Conception" class="headerlink" title="Conception"></a>Conception</h2><p>Depth First Search, called DFS, which is one of graphics traversing or searching methods. The basic idea is exploreing as far as possible along each branch from any start node. DFS algorithm can be implementted recurrently, after a node is visited, it’s visit flag should be setted as true. if the current node has no other un-traveled adjacent nodes, it should return, and find another un-traveled branch.</p>
<p>There are two types of grapics storage structures – adjacent matrix storage and adjacency list storage. In this blog, we take adjacent matrix as the storage structure of graphics.</p>
<p>There is a simple implementation of DFS as follows:</p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><pre><code>#include&lt;iostream&gt;
#include&lt;vector&gt;
using namespace std;
////DFS
////using adjacent matrix storage
class Graph{
    private:
        ////vertices 
        vector&lt;string&gt; m_vex;
        ////arcs
        vector&lt;vector&lt;int&gt;&gt; m_arcs;
        ////is visited flag
        vector&lt;bool&gt; m_flags;
        ////vertex number
        int m_vexnum;

    public:

        //// constructor
        Graph(vector&lt;string&gt; vex){
            m_vex=vex;
            m_vexnum=vex.size();
            m_arcs=vector&lt;vector&lt;int&gt;&gt;(m_vexnum,vector&lt;int&gt;(m_vexnum,0));
            m_flags=vector&lt;bool&gt;(m_vexnum,false);
        }

        ////add edge
        void addEdge(int i,int j){
            if(i&lt;0||i&gt;=m_vexnum) throw &quot;index bound exceed&quot;;
            if(j&lt;0||j&gt;=m_vexnum) throw &quot;index bound exxceed&quot;;
            m_arcs[i][j]=1;
            m_arcs[j][i]=1;
        }

        void visit(int i){
            if(i&lt;0||i&gt;=m_vexnum) throw &quot;index bound exceed&quot;;
            cout&lt;&lt;m_vex[i]&lt;&lt;&quot; &quot;;
        } 

        ////traverse
        void traverse(int i){
            if(i&lt;0||i&gt;=m_vexnum) throw &quot;index bound exceed&quot;;
            visit(i);
            for(int j=0;j&lt;m_vexnum;++j){
                if(m_arc[i][j]==1&amp;&amp;m_flags[j]==false) traverse(j);
            }
        }

        ////dfs
        void dfs(){
            for(int i=0;i&lt;m_vexnum;++i){
                if(m_flags[i]==false) traverse(i);
            }
        }   
};

int main(){
    vector&lt;string&gt; vex={&quot;node1&quot;,&quot;node2&quot;,&quot;node3&quot;,&quot;node4&quot;,&quot;node5&quot;,&quot;node6&quot;};
    Graph g(vex);
    g.addEdge(0,1);
    g.addEdge(0,4);
    g.addEdge(0,2);
    g.addEdge(2,3);
    g.addEdge(4,5);
    g.dfs();
    return 0;
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/DFS-Of-Graph/" data-id="cka8b3ciw000dokv67yqrhln1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Structure/" rel="tag">Data Structure</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-BFS-Of-Graph" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/BFS-Of-Graph/" class="article-date">
  <time datetime="2020-05-15T14:21:49.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/BFS-Of-Graph/">BFS Of Graph</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Conception"><a href="#Conception" class="headerlink" title="Conception"></a>Conception</h2><p>Breath First Search, called BFS, which is one of graphics traversing or searching methods. The basic idea is exploreing as borad as possible of one node from any start node. BFS algorithm can be implementted by a queue, like the level traverse of tree.First of all, we push a node into queue as the start tarverse node of graph, when queue is not empty. We pop each node in queue, access it and find all the neiborhood node of current node, then push them into queue, until queue is empty. after a node is visited, it’s visit flag should be setted as true. </p>
<p>There are two types of grapics storage structures – adjacent matrix storage and adjacency list storage. In this blog, we take adjacent matrix as the storage structure of graphics.</p>
<p>There is a simple implementation of BFS as follows:</p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a><strong>Code</strong></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">////DFS</span></span><br><span class="line"><span class="comment">////using adjacent matrix storage</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Graph</span>&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">////vertices </span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; m_vex;</span><br><span class="line">    <span class="comment">////arcs</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; m_arcs;</span><br><span class="line">    <span class="comment">////is visited flag</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; m_flags;</span><br><span class="line">    <span class="comment">////vertex number</span></span><br><span class="line">    <span class="keyword">int</span> m_vexnum;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment">//// constructor</span></span><br><span class="line">    Graph(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; vex)&#123;</span><br><span class="line">        m_vex=vex;</span><br><span class="line">        m_vexnum=vex.size();</span><br><span class="line">        m_arcs=<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;(m_vexnum,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(m_vexnum,<span class="number">0</span>));</span><br><span class="line">        m_flags=<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;(m_vexnum,<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">////add edge</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">0</span>||i&gt;=m_vexnum) <span class="keyword">throw</span> <span class="string">"index bound exceed"</span>;</span><br><span class="line">        <span class="keyword">if</span>(j&lt;<span class="number">0</span>||j&gt;=m_vexnum) <span class="keyword">throw</span> <span class="string">"index bound exxceed"</span>;</span><br><span class="line">        m_arcs[i][j]=<span class="number">1</span>;</span><br><span class="line">        m_arcs[j][i]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">visit</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">0</span>||i&gt;=m_vexnum) <span class="keyword">throw</span> <span class="string">"index bound exceed"</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;m_vex[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">////traverse</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m_vexnum;++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!m_flags[i])&#123;</span><br><span class="line">                <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">                Q.push(i);</span><br><span class="line">                <span class="keyword">while</span>(!Q.empty())&#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> j=Q.size()<span class="number">-1</span>;j&gt;=<span class="number">0</span>;--j)&#123;</span><br><span class="line">                        <span class="keyword">int</span> cur=Q.top();Q.pop();</span><br><span class="line">                        visit(cur);</span><br><span class="line">                        m_flags[cur]=<span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;m_vecnum;++k)&#123;</span><br><span class="line">                         <span class="keyword">if</span>(!m_flags[k]&amp;&amp;m_arcs[j][k]) Q.push(k);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; vex=&#123;<span class="string">"node1"</span>,<span class="string">"node2"</span>,<span class="string">"node3"</span>,<span class="string">"node4"</span>,<span class="string">"node5"</span>,<span class="string">"node6"</span>&#125;;</span><br><span class="line"><span class="function">Graph <span class="title">g</span><span class="params">(vex)</span></span>;</span><br><span class="line">g.addEdge(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">g.addEdge(<span class="number">0</span>,<span class="number">4</span>);</span><br><span class="line">g.addEdge(<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line">g.addEdge(<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">g.addEdge(<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">g.bfs();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/BFS-Of-Graph/" data-id="cka8b3cir0003okv6dfwv9zig" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Structure/" rel="tag">Data Structure</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Floyd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/Floyd/" class="article-date">
  <time datetime="2020-05-15T14:20:49.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/Floyd/">Floyd</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Conception"><a href="#Conception" class="headerlink" title="Conception"></a>Conception</h2><p>The basic idea of floyd algorithm is very simple, which is based on dynamic programming. If we are going to get the shortest path between vertex i and vertex j, we can get a vertex k as the transfer station, if the path i-&gt;k-&gt;j is shortter than i-&gt;j, update the shortest path of i-&gt;j as i-&gt;k-&gt;j. Meanwhile, we require another matrix to record the path, the path[i][j] is initialized as path[i][j]=i, which means, the shortest path is from i to j. And, if we find a shortter transfer station k, then the path[i][j]=path[k][j].</p>
<h2 id="graph"><a href="#graph" class="headerlink" title="graph"></a>graph</h2><p><img src="https://upload-images.jianshu.io/upload_images/13348038-94dd3a728fb581f0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 99999</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Graph</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Graph(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;s):m_vex(s),m_arcs(s.size(),<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(s.size(),INF)),m_falgs(s.size()),m_vexNum(s.size())&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> weight)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&gt;m_vexNum||i&lt;<span class="number">0</span>) assert(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(j&gt;m_vexNum||j&lt;<span class="number">0</span>) assert(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(i==j)&#123;</span><br><span class="line">            m_arcs[i][j]=<span class="number">0</span>;</span><br><span class="line">            m_arcs[j][i]=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        m_arcs[i][j]=weight;</span><br><span class="line">        m_arcs[j][i]=weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">floyd</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">paths</span><span class="params">(m_vexNum,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(m_vexNum,<span class="number">0</span>))</span></span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">shortPaths</span><span class="params">(m_arcs)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m_vexNum;++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m_vexNum;++j)&#123;</span><br><span class="line">                paths[i][j]=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;m_vexNum;++k)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m_vexNum;++i)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m_vexNum;++j)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(shortPaths[i][j]&gt;shortPaths[i][k]+shortPaths[k][j])&#123;</span><br><span class="line">                        shortPaths[i][j]=shortPaths[i][k]+shortPaths[k][j];</span><br><span class="line">                        paths[i][j]=paths[k][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        m_paths=paths;</span><br><span class="line">        m_shorts=shortPaths;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showPath</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(m_paths.size()!=m_vexNum||m_paths[<span class="number">0</span>].size()!=m_vexNum)&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"[error] have not get shortest path"</span>;</span><br><span class="line">            assert(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(m_paths[i][j]==i)&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;m_vex[i]&lt;&lt;<span class="string">"-&gt;"</span>&lt;&lt;m_vex[j];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;m_vex[m_paths[i][j]]&lt;&lt;<span class="string">"-&gt;"</span>;</span><br><span class="line">            showPath(m_paths[i][j],j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showAllPaths</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m_vexNum;++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;m_vexNum;++j)&#123;</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;m_vex[i]&lt;&lt;<span class="string">"-&gt;"</span>&lt;&lt;m_vex[j]&lt;&lt;<span class="string">" "</span>&lt;&lt;m_shorts[i][j]&lt;&lt;<span class="string">" shortest path is: "</span>;</span><br><span class="line">                showPath(i,j);</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; m_arcs;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; m_vex;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; m_falgs;</span><br><span class="line">    <span class="keyword">int</span> m_vexNum;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; m_paths;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; m_shorts;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; nodes=&#123;<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>,<span class="string">"E"</span>,<span class="string">"F"</span>,<span class="string">"G"</span>&#125;;</span><br><span class="line">    <span class="function">Graph <span class="title">g</span><span class="params">(nodes)</span></span>;</span><br><span class="line">    g.addEdge(<span class="number">0</span>,<span class="number">1</span>,<span class="number">12</span>);</span><br><span class="line">    g.addEdge(<span class="number">0</span>,<span class="number">5</span>,<span class="number">16</span>);</span><br><span class="line">    g.addEdge(<span class="number">0</span>,<span class="number">6</span>,<span class="number">14</span>);</span><br><span class="line">    g.addEdge(<span class="number">1</span>,<span class="number">5</span>,<span class="number">7</span>);</span><br><span class="line">    g.addEdge(<span class="number">5</span>,<span class="number">6</span>,<span class="number">9</span>);</span><br><span class="line">    g.addEdge(<span class="number">1</span>,<span class="number">2</span>,<span class="number">10</span>);</span><br><span class="line">    g.addEdge(<span class="number">5</span>,<span class="number">2</span>,<span class="number">6</span>);</span><br><span class="line">    g.addEdge(<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>);</span><br><span class="line">    g.addEdge(<span class="number">6</span>,<span class="number">4</span>,<span class="number">8</span>);</span><br><span class="line">    g.addEdge(<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">    g.addEdge(<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">    g.addEdge(<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">    g.floyd();</span><br><span class="line">    g.showAllPaths();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>result:</p>
<p><img src="https://upload-images.jianshu.io/upload_images/13348038-35ea8f98e47273d1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/Floyd/" data-id="cka8b3cin0001okv6eqnrdbpp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Structure/" rel="tag">Data Structure</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Dijkstra" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/Dijkstra/" class="article-date">
  <time datetime="2020-05-15T04:20:11.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/Dijkstra/">Dijkstra</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Conception"><a href="#Conception" class="headerlink" title="Conception"></a>Conception</h1><p>Dijkstra is a single source shortest path algorithm, which is able to find the shorest path of two node in a graph in O(n2) time complexity. The basic idea is to maintain two set. One set, called visited set  , contains the node of which the shortest path form source node to this is found. The nodes in another set, called unvisited set, are not found. For each time, we try find the shorest node in set two and update the distance of set 1 nodes until reaching the distination.</p>
<h1 id="Graph"><a href="#Graph" class="headerlink" title="Graph"></a>Graph</h1><p><img src="images/1.png" alt=""></p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 99999</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Graph</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Graph(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;s):m_vex(s),m_arcs(s.size(),<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(s.size(),INF)),m_falgs(s.size()),m_vexNum(s.size())&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> weight)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&gt;m_vexNum||i&lt;<span class="number">0</span>) assert(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(j&gt;m_vexNum||j&lt;<span class="number">0</span>) assert(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(i==j)&#123;</span><br><span class="line">            m_arcs[i][j]=<span class="number">0</span>;</span><br><span class="line">            m_arcs[j][i]=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        m_arcs[i][j]=weight;</span><br><span class="line">        m_arcs[j][i]=weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">0</span>||i&gt;m_vexNum) assert(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">/* initializes shorest paths from i to j*/</span></span><br><span class="line">        <span class="keyword">if</span>(m_paths.empty())&#123;</span><br><span class="line">            m_paths=<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;(m_vexNum,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(m_vexNum,<span class="number">0</span>));</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m_vexNum;++i)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m_vexNum;++j)&#123;</span><br><span class="line">                    m_paths[i][j]=i;        <span class="comment">//by default we regrad the shortest path is i-&gt;j directly</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(m_shorts.empty()) m_shorts=m_arcs;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; <span class="title">visited</span><span class="params">(m_vexNum,<span class="number">0</span>)</span></span>;   <span class="comment">//record visited nodes and unvisited nodes.</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> start=i;                        <span class="comment">//i is start node</span></span><br><span class="line">        visited[start]=<span class="number">1</span>;</span><br><span class="line">        <span class="comment">/*except for node i, we must find m_vexNum-1 nodes'shortest path in total*/</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> count=<span class="number">0</span>;count&lt;m_vexNum<span class="number">-1</span>;++count)&#123;</span><br><span class="line">            <span class="keyword">int</span> min_dist=INT_MAX;</span><br><span class="line">            <span class="keyword">int</span> cur=i;</span><br><span class="line">            <span class="comment">//find the smallest path of start-&gt;j, where j belongs to unvisited set.</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m_vexNum;++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!visited[j]&amp;&amp;m_shorts[start][j]&lt;min_dist)&#123;</span><br><span class="line">                    min_dist=m_shorts[start][j];</span><br><span class="line">                    cur=j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//update the shortest path in visited set.</span></span><br><span class="line">            visited[cur]=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m_vexNum;++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!visited[j]&amp;&amp;m_shorts[start][j]&gt;m_shorts[start][cur]+m_shorts[cur][j])&#123;</span><br><span class="line">                    m_shorts[start][j]=m_shorts[start][cur]+m_shorts[cur][j];</span><br><span class="line">                    m_paths[start][j]=cur;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dijkstraAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m_vexNum;++i)&#123;</span><br><span class="line">            dijkstra(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showPath</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">0</span>||i&gt;m_vexNum) assert(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(j&lt;<span class="number">0</span>||j&gt;m_vexNum) assert(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(m_paths.size()!=m_vexNum||m_paths[<span class="number">0</span>].size()!=m_vexNum)&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"[error] have not get shortest path"</span>;</span><br><span class="line">            assert(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(m_paths[i][j]==i)&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;m_vex[i]&lt;&lt;<span class="string">"-&gt;"</span>&lt;&lt;m_vex[j];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;m_vex[m_paths[i][j]]&lt;&lt;<span class="string">"-&gt;"</span>;</span><br><span class="line">            showPath(m_paths[i][j],j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showAllPaths</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m_vexNum;++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;m_vexNum;++j)&#123;</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;m_vex[i]&lt;&lt;<span class="string">"-&gt;"</span>&lt;&lt;m_vex[j]&lt;&lt;<span class="string">" "</span>&lt;&lt;m_shorts[i][j]&lt;&lt;<span class="string">" shortest path is: "</span>;</span><br><span class="line">                showPath(i,j);</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; m_arcs;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; m_vex;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; m_falgs;</span><br><span class="line">    <span class="keyword">int</span> m_vexNum;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; m_paths;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; m_shorts;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; nodes=&#123;<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>,<span class="string">"E"</span>,<span class="string">"F"</span>,<span class="string">"G"</span>&#125;;</span><br><span class="line">    <span class="function">Graph <span class="title">g</span><span class="params">(nodes)</span></span>;</span><br><span class="line">    g.addEdge(<span class="number">0</span>,<span class="number">1</span>,<span class="number">12</span>);</span><br><span class="line">    g.addEdge(<span class="number">0</span>,<span class="number">5</span>,<span class="number">16</span>);</span><br><span class="line">    g.addEdge(<span class="number">0</span>,<span class="number">6</span>,<span class="number">14</span>);</span><br><span class="line">    g.addEdge(<span class="number">1</span>,<span class="number">5</span>,<span class="number">7</span>);</span><br><span class="line">    g.addEdge(<span class="number">5</span>,<span class="number">6</span>,<span class="number">9</span>);</span><br><span class="line">    g.addEdge(<span class="number">1</span>,<span class="number">2</span>,<span class="number">10</span>);</span><br><span class="line">    g.addEdge(<span class="number">5</span>,<span class="number">2</span>,<span class="number">6</span>);</span><br><span class="line">    g.addEdge(<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>);</span><br><span class="line">    g.addEdge(<span class="number">6</span>,<span class="number">4</span>,<span class="number">8</span>);</span><br><span class="line">    g.addEdge(<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">    g.addEdge(<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">    g.addEdge(<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">    g.dijkstraAll();</span><br><span class="line">    g.showAllPaths();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>result</p>
<p><img src="https://upload-images.jianshu.io/upload_images/13348038-6d01f1034ce622f9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/Dijkstra/" data-id="cka7pna3m0000nwv6dfzg9bdz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Structure/" rel="tag">Data Structure</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Insertion-Sort" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/Insertion-Sort/" class="article-date">
  <time datetime="2020-05-15T04:13:11.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/Insertion-Sort/">Insertion Sort</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Insertion  sort is an effective algorithm for a small amount of elements, the working pricinple of this algorithm like sort the playing cards. Supposing we hold cards in our left hands, and then we use the right hands to choose a  card to find the right location in the cards for every card. This processing we called insertion sort, the actually steps of insertion sort is as following:<br>(1) traversing each elements from 1 to n-1, suppose is j and set key=nums[j];<br>(2) traversing elements from [0,j] and finding the correct position of insertion, suppose is i;<br>(3) if nums[i]&lt;key, we should move nums[i] backward;</p>
<h2 id="code"><a href="#code" class="headerlink" title="code"></a>code</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">&#x2F;&#x2F;ascending</span><br><span class="line">void insert_sort(vector&lt;int&gt; &amp;nums)&#123;</span><br><span class="line">    int i,j,key;</span><br><span class="line">    for(j&#x3D;1;j&lt;nums.size();++j)&#123;</span><br><span class="line">        key&#x3D;nums[j];</span><br><span class="line">        i&#x3D;j-1;</span><br><span class="line">        while(i&gt;&#x3D;0 &amp;&amp; nums[i]&gt;key)&#123;</span><br><span class="line">            nums[i+1] &#x3D; nums[i];</span><br><span class="line">            --i;</span><br><span class="line">        &#125;</span><br><span class="line">        nums[i+1]&#x3D;key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;descending</span><br><span class="line">void insert_sort2(vector&lt;int&gt; &amp;nums)&#123;</span><br><span class="line">    int i,j,key;</span><br><span class="line">    for(i&#x3D;1;i&lt;nums.size();++i)&#123;</span><br><span class="line">        key&#x3D;nums[i];</span><br><span class="line">        j&#x3D;i-1;</span><br><span class="line">        while(j&gt;&#x3D;0 &amp;&amp; nums[j]&lt;key)&#123;</span><br><span class="line">            nums[j+1] &#x3D; nums[j];</span><br><span class="line">            --j;</span><br><span class="line">        &#125;</span><br><span class="line">        nums[j+1]&#x3D;key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc,char** argv)&#123;</span><br><span class="line">    vector&lt;int&gt; nums&#x3D;&#123;2,1,3,5,3,7,9,8&#125;;</span><br><span class="line">    insert_sort(nums);</span><br><span class="line">    insert_sort2(nums);</span><br><span class="line">    for(auto i:nums) cout&lt;&lt;i&lt;&lt;&quot; &quot;;</span><br><span class="line">    cout&lt;&lt;endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/Insertion-Sort/" data-id="cka7ot5g60003pkv62a9vbv43" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Introduce-To-Algorithm/" rel="tag">Introduce To Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Selection-Sort" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/Selection-Sort/" class="article-date">
  <time datetime="2020-05-15T04:12:26.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/Selection-Sort/">Selection Sort</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Supposing we have a unordered array nums. Firstly, we swap the minmum element in nums to nums[0].Then, swaping to sub-minmum element in nums to nums[1] …, the rest can do the same manner, until we find the last elemnts. This algorithm is so-called selection sort, because for each time we choose the minimum element in the rest array, and swap it to the front element.</p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">void choose_sort(vector&lt;int&gt; &amp;nums)&#123;</span><br><span class="line">    int min_&#x3D;0,idx&#x3D;0;</span><br><span class="line">    for(int i&#x3D;0;i&lt;nums.size()-1;++i)&#123;</span><br><span class="line">        min_&#x3D;nums[i];idx&#x3D;i;</span><br><span class="line">        for(int j&#x3D;i+1;j&lt;nums.size();++j)&#123;</span><br><span class="line">            if(min_&gt;nums[j])&#123;</span><br><span class="line">                min_&#x3D;nums[j];</span><br><span class="line">                idx&#x3D;j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        nums[idx]&#x3D;nums[i];</span><br><span class="line">        nums[i]&#x3D;min_;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    vector&lt;int&gt; nums&#x3D;&#123;3,1,2,4,6,7,9,8&#125;;</span><br><span class="line">    choose_sort(nums);</span><br><span class="line">    for(auto i:nums) cout&lt;&lt;i&lt;&lt;&quot; &quot;;</span><br><span class="line">    cout&lt;&lt;endl;</span><br><span class="line">    exit(0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/Selection-Sort/" data-id="cka7ot5g80005pkv6dwp638nd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Introduce-To-Algorithm/" rel="tag">Introduce To Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Merge-Sort" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/Merge-Sort/" class="article-date">
  <time datetime="2020-05-15T04:11:31.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/Merge-Sort/">Merge Sort</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Based on the idea of divide and conquer, merge sort divides the unordered array with length of n as two sub-array of which length is n/2 until the length of array is 1. As we all know, the array with length 1 is an ordered sequence. Then, meger two sorted sub-array we can get the result.</p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">void merge(vector&lt;int&gt; &amp;nums,int left,int mid,int right)&#123;</span><br><span class="line">    vector&lt;int&gt; arr;</span><br><span class="line">    int p1&#x3D;left,p2&#x3D;mid+1;</span><br><span class="line">    while(p1&lt;&#x3D;mid &amp;&amp; p2&lt;&#x3D;right)&#123;</span><br><span class="line">        if(nums[p1]&lt;nums[p2])&#123;</span><br><span class="line">            arr.push_back(nums[p1++]);</span><br><span class="line">        &#125;else arr.push_back(nums[p2++]);</span><br><span class="line">    &#125;</span><br><span class="line">    while(p1&lt;&#x3D;mid) arr.push_back(nums[p1++]);</span><br><span class="line">    while(p2&lt;&#x3D;right) arr.push_back(nums[p2++]);</span><br><span class="line">    int j&#x3D;left;</span><br><span class="line">    for(int i&#x3D;0;i&lt;arr.size();++i)&#123;</span><br><span class="line">        nums[j++]&#x3D;arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void merge_sort(vector&lt;int&gt; &amp;nums,int left,int right)&#123;</span><br><span class="line">    if(left&gt;&#x3D;right) return;</span><br><span class="line">    int mid&#x3D;left + (right-left)&#x2F;2;</span><br><span class="line">    merge_sort(nums,left,mid);</span><br><span class="line">    merge_sort(nums,mid+1,right);</span><br><span class="line">    merge(nums,left,mid,right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    vector&lt;int&gt; nums&#x3D;&#123;1,2,5,6,7,4,3,9,8&#125;;</span><br><span class="line">    merge_sort(nums,0,nums.size()-1);</span><br><span class="line">    for(auto i:nums) cout&lt;&lt;i&lt;&lt;&quot; &quot;;</span><br><span class="line">    cout&lt;&lt;endl;</span><br><span class="line">    exit(0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/Merge-Sort/" data-id="cka7ot5g30001pkv6h3hu4a5m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Introduce-To-Algorithm/" rel="tag">Introduce To Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cracking-the-Coding-Interview/" rel="tag">Cracking the Coding Interview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/" rel="tag">Data Structure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Introduce-To-Algorithm/" rel="tag">Introduce To Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/" rel="tag">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 16.67px;">C++</a> <a href="/tags/Cracking-the-Coding-Interview/" style="font-size: 10px;">Cracking the Coding Interview</a> <a href="/tags/Data-Structure/" style="font-size: 16.67px;">Data Structure</a> <a href="/tags/Introduce-To-Algorithm/" style="font-size: 20px;">Introduce To Algorithm</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 13.33px;">面试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/12/IO-%E6%A8%A1%E5%9E%8B/">IO 模型</a>
          </li>
        
          <li>
            <a href="/2020/08/06/C-%E9%9D%A2%E8%AF%95/">C++基础知识</a>
          </li>
        
          <li>
            <a href="/2020/05/30/Radix-Sort/">Radix Sort</a>
          </li>
        
          <li>
            <a href="/2020/05/30/Letters-and-Numbers/">17.05 Letters and Numbers</a>
          </li>
        
          <li>
            <a href="/2020/05/28/Count-Sort/">Count Sort</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 BeeCaffe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>